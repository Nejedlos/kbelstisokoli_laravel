const w=()=>document.documentElement.lang||"cs",h={cs:{required:"Tohle pole musíte vyplnit, bez toho to nepůjde.",email:"Tahle adresa nevypadá jako správný e-mail.",capslock:"Caps Lock je zapnutý",strength:{title:"Heslo není dostatečně silné.",length:"Minimálně 8 znaků",upper:"Alespoň jedno velké písmeno",number:"Alespoň jedno číslo",special:"Alespoň jeden speciální znak"},mismatch:"Hesla se neshodují, zkuste to znovu.",match:{empty:"Čekám na přihrávku...",partial:"Driblink v pořádku...",mismatch:"Ztráta míče! Tohle nesedí.",full:"SMEČ! Hesla jsou v týmu."}},en:{required:"This field is required, we can't go further without it.",email:"This doesn't look like a valid email address.",capslock:"Caps Lock is ON",strength:{title:"Password is not strong enough.",length:"At least 8 characters",upper:"At least one uppercase letter",number:"At least one number",special:"At least one special character"},mismatch:"Passwords do not match, please try again.",match:{empty:"Waiting for the pass...",partial:"Dribbling fine...",mismatch:"Turnover! Doesn't match.",full:"DUNK! Passwords match."}}},n=e=>{const s=w(),t=e.split(".");let a=h[s]||h.cs;for(const r of t){if(!a[r])return e;a=a[r]}return a},k=()=>{document.querySelectorAll("form").forEach(e=>{e.hasAttribute("novalidate")||e.setAttribute("novalidate","novalidate")})},g=e=>({length:e.length>=8,upper:/[A-Z]/.test(e),number:/[0-9]/.test(e),special:/[^A-Za-z0-9]/.test(e)}),c=e=>(e.name||e.id||e.getAttribute("wire:model")||"").toLowerCase().includes("confirmation"),p=e=>{const s=e.value.trim();if(!s)return!1;if(e.type==="email")return!!s.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);if(e.type==="password"||e.classList.contains("fi-revealable")){if(c(e)){const a=e.closest("form"),r=a?a.querySelector('input[type="password"]:not([id*="Confirmation"]):not([name*="Confirmation"]), input.fi-revealable:not([id*="Confirmation"]):not([name*="Confirmation"])'):null;return r&&s===r.value}if(document.querySelector('[id*="Confirmation"], [name*="Confirmation"]')||window.location.pathname.includes("reset")){const a=g(s);return a.length&&a.upper&&a.number&&a.special}}return!0},v=(e,s)=>{const t=e.closest(".fi-fo-field")||e.closest(".fi-fo-field-wrp");if(!t)return;const a=t.querySelector(".fi-fo-field-content-col")||t;let r=a.querySelector(".fi-error-message");if(!s){r&&r.remove(),t.classList.remove("ks-invalid");return}if(!r){r=document.createElement("div"),r.className="fi-error-message";const i=document.createElement("span");r.appendChild(i),a.appendChild(r)}r.querySelector("span").textContent=s,t.classList.add("ks-invalid"),t.classList.remove("ks-valid")},y=e=>{if(e.querySelector(".ks-password-strength"))return;const s=e.querySelector(".fi-fo-field-content-col")||e,t=document.createElement("div");t.className="ks-password-strength animate-fade-in",["length","upper","number","special"].forEach(r=>{const i=document.createElement("div");i.className=`strength-rule rule-${r}`,i.innerHTML=`<i class="fa-light fa-circle"></i><span>${n("strength."+r)}</span>`,t.appendChild(i)}),s.appendChild(t)},C=e=>{if(c(e))return;const s=e.closest(".fi-fo-field")||e.closest(".fi-fo-field-wrp");if(!s||!(document.querySelector('[id*="Confirmation"], [name*="Confirmation"]')||window.location.pathname.includes("reset")))return;const a=e.value;if(!a){const i=s.querySelector(".ks-password-strength");i&&i.remove();return}y(s);const r=g(a);Object.keys(r).forEach(i=>{const o=s.querySelector(`.rule-${i}`);o&&(r[i]?(o.classList.add("is-valid"),o.querySelector("i").className="fa-light fa-circle-check"):(o.classList.remove("is-valid"),o.querySelector("i").className="fa-light fa-circle"))})},q=e=>{let s=e.querySelector(".ks-match-progress");if(s)return s;const t=e.querySelector(".fi-fo-field-content-col")||e;return s=document.createElement("div"),s.className="ks-match-progress animate-fade-in",s.innerHTML=`
        <div class="match-text"></div>
        <div class="match-bar-container">
            <div class="match-bar"></div>
        </div>
    `,t.appendChild(s),s},L=e=>{if(!c(e))return;const s=e.closest(".fi-fo-field")||e.closest(".fi-fo-field-wrp");if(!s)return;const t=e.value;if(!t){const m=s.querySelector(".ks-match-progress");m&&m.remove();return}const a=q(s),r=a.querySelector(".match-bar"),i=a.querySelector(".match-text"),o=e.closest("form"),d=o?o.querySelector('input[type="password"]:not([id*="Confirmation"]):not([name*="Confirmation"]), input.fi-revealable:not([id*="Confirmation"]):not([name*="Confirmation"])'):null,l=d?d.value:"";if(t===l)a.className="ks-match-progress animate-fade-in state-full",r.style.width="100%",i.textContent=n("match.full");else if(l.startsWith(t)){a.className="ks-match-progress animate-fade-in state-partial";const m=l.length>0?Math.round(t.length/l.length*100):0;r.style.width=`${m}%`,i.textContent=n("match.partial")}else a.className="ks-match-progress animate-fade-in state-mismatch",r.style.width="100%",i.textContent=n("match.mismatch")},f=(e,s=!1)=>{if(!e||e.type==="hidden"||e.type==="submit")return;const t=e.closest(".fi-fo-field")||e.closest(".fi-fo-field-wrp");if(!t)return;const a=e.value,r=a.trim(),i=e.type==="password"||e.classList.contains("fi-revealable");if(i&&(t.classList.add("ks-password-field"),C(e),c(e))){L(e);const o=e.closest("form"),d=o?o.querySelector('input[type="password"]:not([id*="Confirmation"]):not([name*="Confirmation"]), input.fi-revealable:not([id*="Confirmation"]):not([name*="Confirmation"])'):null;if(d&&a){const l=d.value;a===l?(t.classList.add("ks-valid"),t.classList.remove("ks-partial","ks-mismatch")):l.startsWith(a)?(t.classList.add("ks-partial"),t.classList.remove("ks-valid","ks-mismatch")):(t.classList.add("ks-mismatch"),t.classList.remove("ks-valid","ks-partial"))}else t.classList.remove("ks-valid","ks-partial","ks-mismatch")}if(c(e)||p(e)&&(t.classList.add("ks-valid"),s||v(e,null)),s){let o="";e.hasAttribute("required")&&!r?o=n("required"):e.type==="email"&&r&&!r.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)?o=n("email"):i&&!r?o=n("required"):i&&!p(e)&&(c(e)?o=n("mismatch"):(document.querySelector('[id*="Confirmation"], [name*="Confirmation"]')||window.location.pathname.includes("reset"))&&(o=n("strength.title"))),o&&v(e,o)}},u=()=>{k(),document.querySelectorAll("input, select, textarea").forEach(e=>{e.value&&f(e)})};document.addEventListener("input",e=>{if(e.target.matches("input, select, textarea")&&(f(e.target),(e.target.type==="password"||e.target.classList.contains("fi-revealable"))&&!c(e.target))){const t=document.querySelector('input[id*="Confirmation"], input[name*="Confirmation"]');t&&f(t)}});document.addEventListener("submit",e=>{const s=e.target;if(s.tagName==="FORM"){s.querySelectorAll("input, select, textarea").forEach(a=>{f(a,!0)});const t=s.querySelector(".ks-invalid input");t&&t.focus()}},!0);document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();document.addEventListener("livewire:navigated",u);window.Livewire&&Livewire.hook("request.processed",u);
